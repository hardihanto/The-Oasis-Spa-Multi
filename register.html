<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elite Gateway | SaaSBOOK Engineering</title>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap');
        
        :root {
            --brand-primary: #10b981;
            --bg-dark: #030712;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background-color: var(--bg-dark);
            color: #f8fafc;
            overflow-x: hidden;
        }

        .neo-glass {
            background: rgba(17, 24, 39, 0.7);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .interactive-input {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(71, 85, 105, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .interactive-input:focus {
            border-color: var(--brand-primary);
            box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.15);
            background: rgba(15, 23, 42, 0.9);
        }

        .glow-button {
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
        }

        .glow-button::after {
            content: '';
            position: absolute;
            top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
            transform: scale(0);
            transition: transform 0.6s ease;
        }

        .glow-button:hover::after { transform: scale(1); }

        .mesh-gradient {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: 
                radial-gradient(at 0% 0%, rgba(16, 185, 129, 0.15) 0px, transparent 50%),
                radial-gradient(at 100% 100%, rgba(59, 130, 246, 0.1) 0px, transparent 50%);
            z-index: -1;
        }

        /* Floating Animation */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .float-icon { animation: float 4s ease-in-out infinite; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="mesh-gradient"></div>

    <div class="neo-glass w-full max-w-2xl rounded-[2.5rem] p-8 md:p-14 relative overflow-hidden">
        <div class="absolute top-8 right-8">
            <span class="text-[10px] font-bold tracking-[0.3em] text-emerald-500 bg-emerald-500/10 px-4 py-2 rounded-full border border-emerald-500/20">
                SYSTEM v4.0.2
            </span>
        </div>

        <div class="mb-12">
            <div class="w-16 h-16 bg-gradient-to-tr from-emerald-500 to-blue-500 rounded-2xl flex items-center justify-center mb-6 float-icon shadow-lg shadow-emerald-500/20">
                <i class="fa-solid fa-layer-group text-2xl text-white"></i>
            </div>
            <h1 class="text-4xl font-bold tracking-tight text-white mb-2">Deploy New <span class="text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-blue-400">Instance.</span></h1>
            <p class="text-slate-400 font-light">Konfigurasi parameter infrastruktur bisnis Anda.</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="space-y-6">
                <div class="group">
                    <label class="text-xs font-bold text-slate-500 uppercase tracking-widest ml-1 mb-2 block group-focus-within:text-emerald-400 transition-colors">Enterprise Identity</label>
                    <div class="relative">
                        <i class="fa-solid fa-id-card absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 text-sm"></i>
                        <input type="text" id="bizName" placeholder="Nama Brand" class="interactive-input w-full pl-11 pr-4 py-4 rounded-xl text-sm focus:outline-none">
                    </div>
                </div>

                <div class="group">
                    <label class="text-xs font-bold text-slate-500 uppercase tracking-widest ml-1 mb-2 block group-focus-within:text-emerald-400 transition-colors">Access Logic (Username)</label>
                    <div class="relative">
                        <i class="fa-solid fa-terminal absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 text-sm"></i>
                        <input type="text" id="bizUser" placeholder="sys_admin" class="interactive-input w-full pl-11 pr-4 py-4 rounded-xl text-sm focus:outline-none">
                    </div>
                </div>
            </div>

            <div class="space-y-6">
                <div class="group">
                    <label class="text-xs font-bold text-slate-500 uppercase tracking-widest ml-1 mb-2 block group-focus-within:text-emerald-400 transition-colors">Endpoint Slug</label>
                    <div class="relative">
                        <i class="fa-solid fa-link absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 text-sm"></i>
                        <input type="text" id="bizSlug" placeholder="unique-id" class="interactive-input w-full pl-11 pr-4 py-4 rounded-xl text-sm focus:outline-none">
                    </div>
                </div>

                <div class="group">
                    <label class="text-xs font-bold text-slate-500 uppercase tracking-widest ml-1 mb-2 block group-focus-within:text-emerald-400 transition-colors">Security Key</label>
                    <div class="relative">
                        <i class="fa-solid fa-key absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 text-sm"></i>
                        <input type="password" id="bizPass" placeholder="••••••••" class="interactive-input w-full pl-11 pr-4 py-4 rounded-xl text-sm focus:outline-none">
                    </div>
                </div>
            </div>

            <div class="md:col-span-2 group">
                <label class="text-xs font-bold text-slate-500 uppercase tracking-widest ml-1 mb-2 block group-focus-within:text-emerald-400 transition-colors">Comm-Line (WhatsApp Number)</label>
                <div class="relative">
                    <i class="fa-brands fa-whatsapp absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 text-lg"></i>
                    <input type="number" id="bizWA" placeholder="628xxxxxxxxxx" class="interactive-input w-full pl-11 pr-4 py-4 rounded-xl text-sm focus:outline-none">
                </div>
            </div>
        </div>

        <div class="mt-12">
            <button onclick="executeDeployment()" id="btnReg" class="glow-button w-full bg-gradient-to-r from-emerald-500 to-emerald-600 text-slate-950 font-bold py-5 rounded-2xl flex items-center justify-center gap-3 hover:shadow-[0_0_30px_-5px_rgba(16,185,129,0.4)] active:scale-[0.98]">
                <span class="tracking-widest">INITIALIZE DEPLOYMENT</span>
                <i class="fa-solid fa-chevron-right text-xs"></i>
            </button>
            
            <div class="mt-8 flex items-center justify-center gap-6 text-[10px] text-slate-500 uppercase tracking-[0.2em] font-medium">
                <span class="flex items-center gap-2"><i class="fa-solid fa-circle text-[6px] text-emerald-500 animate-pulse"></i> DB Core Connected</span>
                <span class="flex items-center gap-2"><i class="fa-solid fa-circle text-[6px] text-blue-500 animate-pulse"></i> API Latency: 24ms</span>
            </div>
        </div>
    </div>

    <script>
        const SB_URL = "https://strylleubkvuirsknqbk.supabase.co";
        const SB_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN0cnlsbGV1Ymt2dWlyc2tucWJrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE0ODM2OTksImV4cCI6MjA4NzA1OTY5OX0.sfnSvVgUoBRgwDyYY5VBAaHPHM_rPKBQ4a3w1ziKgUw";
        const sb = supabase.createClient(SB_URL, SB_KEY);

        async function executeDeployment() {
            const payload = {
                business_name: document.getElementById('bizName').value,
                owner_wa: document.getElementById('bizWA').value,
                slug: document.getElementById('bizSlug').value.toLowerCase().trim().replace(/\s+/g, '-'),
                admin_username: document.getElementById('bizUser').value,
                admin_password: document.getElementById('bizPass').value,
                is_active: false
            };

            const btn = document.getElementById('btnReg');

            if(Object.values(payload).some(v => v === "")) {
                return alert("⚠️ CRITICAL: All parameters must be defined for deployment.");
            }

            btn.innerHTML = '<i class="fa-solid fa-sync fa-spin"></i> EXECUTING SCRIPTS...';
            btn.disabled = true;

            const { error } = await sb.from('businesses').insert([payload]);

            if(!error) {
                btn.innerHTML = '<i class="fa-solid fa-check"></i> DEPLOYED SUCCESSFULLY';
                btn.classList.replace('from-emerald-500', 'from-blue-500');
                setTimeout(() => window.location.reload(), 2000);
            } else {
                alert("DEPLOYMENT FAILED: " + error.message);
                btn.innerHTML = '<span class="tracking-widest">RETRY DEPLOYMENT</span>';
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
