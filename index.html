<!DOCTYPE html>
<html>
<head>
    <title>Booking Online</title>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-green-50 p-5">
    <div class="max-w-md mx-auto bg-white p-8 rounded-lg shadow-lg">
        <h2 class="text-2xl font-bold mb-5 text-green-700">Form Reservasi</h2>
        <form id="formBooking">
            <input type="text" id="nama" placeholder="Nama Anda" class="w-full border p-2 mb-3 rounded" required>
            <input type="text" id="wa" placeholder="Nomor WA (628...)" class="w-full border p-2 mb-3 rounded" required>
            <input type="date" id="tgl" class="w-full border p-2 mb-3 rounded" required>
            <input type="time" id="jam" class="w-full border p-2 mb-5 rounded" required>
            <button type="submit" class="w-full bg-green-600 text-white py-2 rounded">Kirim Pesanan</button>
        </form>
    </div>

    <script>
        const SB_URL = "https://oivvcaeqfyssnphvtojg.supabase.co";
        const SB_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9pdnZjYWVxZnlzc25waHZ0b2pnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE0NTk3NDAsImV4cCI6MjA4NzAzNTc0MH0.cG0WG5_TWu7ivdNVkz4BlGyugHwHIKRlQS50e9iXKwo";
        const supabaseClient = supabase.createClient(SB_URL, SB_KEY);

        document.getElementById('formBooking').onsubmit = async (e) => {
            e.preventDefault();
            const bizId = "oasis-spa"; // ID default untuk testing

            const { error } = await supabaseClient.from('bookings').insert([{
                business_id: bizId,
                client_name: document.getElementById('nama').value,
                client_wa: document.getElementById('wa').value,
                booking_date: document.getElementById('tgl').value,
                booking_time: document.getElementById('jam').value
            }]);

            if (error) alert("Gagal!");
            else alert("Berhasil! Silakan cek Dashboard Admin.");
        };
    </script>
</body>
</html>
